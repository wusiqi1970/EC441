function initMap(e){function k(){for(;0!=f.length;)f.pop().setMap(null);var a=new XMLHttpRequest;a.open("GET","https://api-v3.mbta.com/vehicles?filter[route]=Green-B,Green-C",!0);a.onreadystatechange=function(){if(4==a.readyState&&"200"==a.status)for(var d=JSON.parse(this.responseText),c=0;c<d.data.length;c++){var b=d.data[c],h={lat:b.attributes.latitude,lng:b.attributes.longitude},g={path:google.maps.SymbolPath.FORWARD_CLOSED_ARROW,strokeColor:"green",rotation:b.attributes.bearing,anchor:new google.maps.Point(0,
2),scale:4};b=new google.maps.Marker({position:h,title:b.id,map:e,icon:g});f.push(b)}};a.send();setTimeout(k,1E4)}function l(){for(;0!=g.length;)g.pop().setMap(null);var a=new XMLHttpRequest;a.open("GET","api/buShuttle",!0);a.onreadystatechange=function(){if(4==a.readyState&&"200"==a.status)for(var d=JSON.parse(this.responseText),c=0;c<d.ResultSet.Result.length;c++){var b=d.ResultSet.Result[c],h={lat:parseFloat(b.lat),lng:parseFloat(b.lng)},f={path:google.maps.SymbolPath.FORWARD_CLOSED_ARROW,strokeColor:"red",
fillColor:"red",fillOpacity:1,anchor:new google.maps.Point(0,2),rotation:parseInt(b.heading),scale:4};b=new google.maps.Marker({position:h,title:b.call_name,map:e,icon:f});g.push(b)}};a.send();setTimeout(l,1E4)}var f=[],g=[];e=new google.maps.Map(document.getElementById("map"),{center:{lat:42.3483459,lng:-71.1029828},zoom:15,disableDefaultUI:!0});e.setOptions({styles:[{featureType:"landscape",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"road",stylers:[{visibility:"on"}]},
{featureType:"road",elementType:"labels.text",stylers:[{lightness:50}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#dcdcdc"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#c0c0c0"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#8a8a8a"}]},{featureType:"road.highway",elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#c9dae2"}]},
{featureType:"water",elementType:"labels.text",stylers:[{color:"#8a8a8a"}]}]});(function(){var a=new XMLHttpRequest;a.open("GET","https://api-v3.mbta.com/shapes?filter[route]=Green-B,Green-C",!0);a.onreadystatechange=function(){if(4==a.readyState&&"200"==a.status)for(var d=JSON.parse(this.responseText),c=["6","7"],b=0;b<c.length;++b){var f=google.maps.geometry.encoding.decodePath(d.data[c[b]].attributes.polyline);(new google.maps.Polyline({path:f,geodesic:!0,strokeOpacity:0,icons:[{icon:{path:"M 0,-1 0,1",
strokeOpacity:1,strokeColor:"green",strokeWeight:3,scale:4},offset:"0",repeat:"30px"}]})).setMap(e)}};a.send()})();k();(function(){var a=[new google.maps.LatLng(42.352514,-71.118344),new google.maps.LatLng(42.3536,-71.118092),new google.maps.LatLng(42.353687,-71.117968),new google.maps.LatLng(42.353683,-71.117775),new google.maps.LatLng(42.35319,-71.116724),new google.maps.LatLng(42.352641,-71.115673),new google.maps.LatLng(42.352482,-71.115479),new google.maps.LatLng(42.351745,-71.115656),new google.maps.LatLng(42.351007,
-71.115801),new google.maps.LatLng(42.350774,-71.113768),new google.maps.LatLng(42.35052,-71.111773),new google.maps.LatLng(42.349834,-71.106006),new google.maps.LatLng(42.348882,-71.098013),new google.maps.LatLng(42.348764,-71.096972),new google.maps.LatLng(42.348851,-71.092836),new google.maps.LatLng(42.348545,-71.092772),new google.maps.LatLng(42.347915,-71.092455),new google.maps.LatLng(42.347808,-71.092359),new google.maps.LatLng(42.347245,-71.092407),new google.maps.LatLng(42.346948,-71.09238),
new google.maps.LatLng(42.346813,-71.092284),new google.maps.LatLng(42.346757,-71.092166),new google.maps.LatLng(42.346444,-71.091141),new google.maps.LatLng(42.346301,-71.090884),new google.maps.LatLng(42.346083,-71.090739),new google.maps.LatLng(42.345865,-71.090669),new google.maps.LatLng(42.345493,-71.090594),new google.maps.LatLng(42.344831,-71.090744),new google.maps.LatLng(42.344595,-71.090776),new google.maps.LatLng(42.344359,-71.090744),new google.maps.LatLng(42.344244,-71.090661),new google.maps.LatLng(42.344109,
-71.090444),new google.maps.LatLng(42.343984,-71.08999),new google.maps.LatLng(42.343831,-71.089124),new google.maps.LatLng(42.343324,-71.085798),new google.maps.LatLng(42.342773,-71.084913),new google.maps.LatLng(42.342265,-71.084189),new google.maps.LatLng(42.34215,-71.084124),new google.maps.LatLng(42.341337,-71.082923),new google.maps.LatLng(42.340572,-71.081802),new google.maps.LatLng(42.340255,-71.081367),new google.maps.LatLng(42.339801,-71.080916),new google.maps.LatLng(42.339208,-71.080348),
new google.maps.LatLng(42.338391,-71.079409),new google.maps.LatLng(42.337325,-71.078068),new google.maps.LatLng(42.336448,-71.077027),new google.maps.LatLng(42.333478,-71.073444),new google.maps.LatLng(42.333569,-71.073304),new google.maps.LatLng(42.333676,-71.073278),new google.maps.LatLng(42.334406,-71.072205),new google.maps.LatLng(42.334937,-71.071443),new google.maps.LatLng(42.334985,-71.071432),new google.maps.LatLng(42.335469,-71.070719),new google.maps.LatLng(42.335933,-71.07008),new google.maps.LatLng(42.336016,
-71.070182),new google.maps.LatLng(42.337495,-71.071958),new google.maps.LatLng(42.338871,-71.073589),new google.maps.LatLng(42.338013,-71.074844),new google.maps.LatLng(42.33652,-71.076915),new google.maps.LatLng(42.337892,-71.078572),new google.maps.LatLng(42.338605,-71.079468),new google.maps.LatLng(42.339367,-71.080353),new google.maps.LatLng(42.340015,-71.080955),new google.maps.LatLng(42.340564,-71.081574),new google.maps.LatLng(42.34064,-71.081705),new google.maps.LatLng(42.341825,-71.083459),
new google.maps.LatLng(42.34222,-71.084028),new google.maps.LatLng(42.342265,-71.084167),new google.maps.LatLng(42.342997,-71.085262),new google.maps.LatLng(42.343332,-71.085787),new google.maps.LatLng(42.345187,-71.086694),new google.maps.LatLng(42.347975,-71.088083),new google.maps.LatLng(42.349763,-71.088952),new google.maps.LatLng(42.350849,-71.089489),new google.maps.LatLng(42.350359,-71.091259),new google.maps.LatLng(42.350115,-71.092214),new google.maps.LatLng(42.349945,-71.092874),new google.maps.LatLng(42.349878,
-71.093308),new google.maps.LatLng(42.349755,-71.093571),new google.maps.LatLng(42.349204,-71.095459),new google.maps.LatLng(42.349073,-71.096033),new google.maps.LatLng(42.348982,-71.096522),new google.maps.LatLng(42.349009,-71.097149),new google.maps.LatLng(42.348997,-71.097358),new google.maps.LatLng(42.349973,-71.105319),new google.maps.LatLng(42.350472,-71.109428),new google.maps.LatLng(42.350472,-71.109729),new google.maps.LatLng(42.351543,-71.118548),new google.maps.LatLng(42.352514,-71.118344)],
d=[new google.maps.LatLng(42.35132,-71.11824),new google.maps.LatLng(42.35096,-71.1157),new google.maps.LatLng(42.35038,-71.11109),new google.maps.LatLng(42.35016,-71.11104),new google.maps.LatLng(42.34996,-71.11093),new google.maps.LatLng(42.34986,-71.11086),new google.maps.LatLng(42.34921,-71.1097),new google.maps.LatLng(42.34889,-71.10908),new google.maps.LatLng(42.34878,-71.10849),new google.maps.LatLng(42.3487,-71.10788),new google.maps.LatLng(42.34855,-71.10691),new google.maps.LatLng(42.34836,
-71.10599),new google.maps.LatLng(42.34705,-71.10534),new google.maps.LatLng(42.34658,-71.1051),new google.maps.LatLng(42.34455,-71.10413),new google.maps.LatLng(42.34361,-71.10433),new google.maps.LatLng(42.34275,-71.10322),new google.maps.LatLng(42.33891,-71.10727),new google.maps.LatLng(42.34034,-71.10989),new google.maps.LatLng(42.34085,-71.10939),new google.maps.LatLng(42.34145,-71.10748),new google.maps.LatLng(42.34174,-71.1069),new google.maps.LatLng(42.34294,-71.10587),new google.maps.LatLng(42.34445,
-71.10384),new google.maps.LatLng(42.34463,-71.10401),new google.maps.LatLng(42.34658,-71.10505),new google.maps.LatLng(42.34745,-71.10191),new google.maps.LatLng(42.34839,-71.09845),new google.maps.LatLng(42.34865,-71.09745),new google.maps.LatLng(42.34869,-71.09709),new google.maps.LatLng(42.34874,-71.0967),new google.maps.LatLng(42.34882,-71.09294),new google.maps.LatLng(42.34886,-71.08869),new google.maps.LatLng(42.34887,-71.0885),new google.maps.LatLng(42.35088,-71.08946),new google.maps.LatLng(42.35025,
-71.09174),new google.maps.LatLng(42.34987,-71.09334),new google.maps.LatLng(42.34927,-71.09532),new google.maps.LatLng(42.34897,-71.09636),new google.maps.LatLng(42.34903,-71.09727),new google.maps.LatLng(42.34912,-71.09838),new google.maps.LatLng(42.34966,-71.10284),new google.maps.LatLng(42.34996,-71.10532),new google.maps.LatLng(42.35035,-71.10862),new google.maps.LatLng(42.35095,-71.11343),new google.maps.LatLng(42.35121,-71.11576),new google.maps.LatLng(42.35251,-71.11549),new google.maps.LatLng(42.35328,
-71.11685),new google.maps.LatLng(42.35363,-71.11761),new google.maps.LatLng(42.35372,-71.11794),new google.maps.LatLng(42.35364,-71.11811),new google.maps.LatLng(42.3531,-71.11822),new google.maps.LatLng(42.35154,-71.11855),new google.maps.LatLng(42.35134,-71.1186),new google.maps.LatLng(42.35132,-71.11826)],c=new XMLHttpRequest;c.open("GET","api/buShuttle",!0);c.onreadystatechange=function(){4==c.readyState&&"200"==c.status&&(JSON.parse(this.responseText),(new google.maps.Polyline({path:a,geodesic:!0,
strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2})).setMap(e),(new google.maps.Polyline({path:d,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2})).setMap(e))};c.send()})();l()};
